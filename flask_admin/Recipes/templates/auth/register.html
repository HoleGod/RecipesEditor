{% extends 'auth_base.html' %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center min-vh-100">
	<div class="card shadow p-4" style="max-width: 500px; width: 100%;">
		<h3 class="text-center mb-4">Register New Account</h3>
		<form action="{{ url_for('auth.register') }}" method="post" enctype="multipart/form-data">
			<div class="mb-3">
				<label for="name" class="form-label"><b>Full Name</b></label>
				<input type="text" id="name" name="name" class="form-control" placeholder="Enter your full name" required>
			</div>

			<div class="mb-3">
				<label for="username" class="form-label"><b>Username</b></label>
				<input type="text" name="username" id="username" class="form-control" placeholder="Enter your username" required>
			</div>

			<div class="mb-3">
				<label for="email" class="form-label"><b>Email</b></label>
				<input type="email" id="email" name="email" class="form-control" placeholder="Enter your email" required>
			</div>

			<div class="mb-3">
				<label for="age" class="form-label"><b>Age</b></label>
				<input type="number" id="age" name="age" class="form-control" min="1" max="120" placeholder="Your age">
			</div>

			<div class="mb-3">
				<label for="workplace" class="form-label"><b>Workplace</b></label>
				<input type="text" id="workplace" name="workplace" class="form-control" placeholder="Your workplace">
			</div>

			<div class="mb-3">
				<label for="street" class="form-label"><b>Street</b></label>
				<input type="text" id="street" name="street" class="form-control" placeholder="Your street">
			</div>

			<div class="mb-3">
				<label for="profile_image" class="form-label"><b>Profile Image (optional)</b></label>
				<input type="file" id="profile_image" name="profile_image" class="form-control" accept="image/*" onchange="previewImage(event)">
				<img id="image_preview" src="{{ url_for('static', filename=g.user.profile_image) }}" alt="Preview" class="mt-2" style="max-width: 150px; border-radius: 8px;">
				
			</div>

			<div class="mb-3">
				<label for="password" class="form-label"><b>Password</b></label>
				<input type="password" name="password" id="password" class="form-control" placeholder="Enter your password" required>
			</div>

			<div class="mb-3">
				<label for="password-rpt" class="form-label"><b>Confirm Password</b></label>
				<input type="password" name="password-rpt" id="password-rpt" class="form-control" placeholder="Repeat your password" required>
			</div>

			<hr>
			<div class="mb-3">
				<label for="role" class="form-label"><b>Role</b></label>
				<select id="role" name="role" class="form-select" required>
					<option value="" disabled selected>Select a role</option>
					<option value="user">User</option>
					<option value="moderator">Moderator</option>
					<option value="admin">Admin</option>
				</select>
			</div>
			<hr>			

			<p class="small">By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
			<button type="submit" class="btn btn-success w-100">Register</button>
		</form>

		<hr>
		<p class="text-center mb-0">Already have an account? <a href="{{ url_for('auth.login') }}">Sign in</a>.</p>
	</div>
</div>
{% endblock content %}

{% block script %}
<script>
    function previewImage(event) {
        const preview = document.getElementById('image_preview');
        preview.src = URL.createObjectURL(event.target.files[0]);
    }
</script>
{% endblock %}